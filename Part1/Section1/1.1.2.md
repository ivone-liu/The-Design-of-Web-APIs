非常多的移动应用都是基于后端提供的API开发的，但不仅仅是看到的这样，网络API将软件变成可重复使用的易于组装的组件，从而释放出创造力和创新力。让我们回到一开始的例子去看看在社交网络分享图片会发生哪些事情。



当社交网络的后端接受到图片和信息之后，会优先存储接收到的图片，并且将信息和图片信息写到数据库里面。后端还有能力在存储图片之前，对照片进行面部算法识别，检测照片中的好友信息。而这仅仅是后端处理的冰山一角，后端还能为应用程序提供一切可能的计算。我们在图1.4中详细了解一下。



![1.1.2](../../assets/images/1.4.jpg)



后端API能够同时为社交网络的移动应用和网站提供不同的基础能力，当后端接受到要分享的照片和信息时，可以通过API的形式委托第三方存储服务公司来存储，也可以通过API将信息和照片的委托给内部时间轴软件存储模块，那如何处理照片的面部识别呢？好吧，这可以委托一些面部识别专家通过......你猜对了......API提供服务。



注意图1.4为了使得图例更加容易理解，图中的每一个API都仅仅暴露出一个功能，而实际上一个API可以实现多种复杂的功能。例如，后台可以通过一个接口来获取实现添加好友、好友列表或者获取时间线的数据。



这看上去有点像是乐高的积木块，你可以用这些积木块组成任意你想要的东西，积木的可能组合是无穷的，而唯一的限制就是你自己的想象力。



在我还是个小孩子的时候，我经常花非常多的时间来用乐高积木拼装建筑物、汽车、植物、宇宙飞船等等所有我喜欢的东西。当我开始觉得拼装的玩具很无聊的时候，我就把它拆掉重新组装一个新的玩具，或者是将它变成其他玩具的组件，比如我曾经就把一些已经拼装好的玩具拼在一起制作了一个巨大的太空船。这跟API世界的运行原理是一样的：你可以将庞大的软件系统拆分成易于拼装的零部件，这些组件可以很容易地组装和替换，不过在实际操作中与乐高积木之间还是有一些细微的区别。



每一个软件的组件都是可以同时被多个其他模块调用的，例如，一个后端的API可以同时给移动应用和网站应用提供能力。一个API通常是面向多个消费者的，因此你不需要一直为需要的功能不停地编写新代码。



只要应用以API的方式暴露在网络中，每一个软件的组件都是可以独立运行的。同时也为软件的性能和可拓展性提供了一个较好的方法，如图1.4中这样的面部识别组件所需处理的资源相比起社交网络的要多得多，提供社交服务的公司会将面部识别这类程序托管在配置不同的、专用的、更强劲的服务器上面，而单纯的社交程序回放在一组相比起来更小一点的服务器上面，以上的两种程序都是可以借助网络来开放API给任何人使用。



目前常见的的只有两类API：公共API和私有API。面部识别和图片存储一般都是由第三方公司提供而非是社交网络公司自己开发的。这类API就是公共API。



公共API通常是作为一个服务或是一个产品，你不需要开发、不需要安装、不需要运行，你只需要同意条款和第三方协议就可以使用。根据API提供商的商业模式，这种API可以是免费的，也可以是付费的，就像其他软件产品一样，这类公共API可以提给你提供更多的创造力和创新力，可以大大加速你去完成你的软件项目。如同斯蒂夫乔布斯所说，有一个API就可以实现，为什么要花时间去重构一个无可救药而且不够圆的轮子呢？我们所讲的例子中，社交网络公司只需要将注意力集中连接人与人的核心业务上，把人脸识别委托给第三方就可以了。



但公共API只是API世界的一角，社交网络的后端技术组件都是由公司自己开发的。时间线API仅提供给公司自己的应用程序使用，如图1.4中的移动应用后端。这些被称为是私有API，并且这类API的数量巨大。一个私有的API一般都是自己或是团队内开发的，由自己或是团队来使用，这里你既是API的提供者也是API的消费者。



**注意** 公共或是私有的主要问题是面向哪个应用而非暴露方式，即便是暴露在了互联网上面，移动应用的后端API依然是私有API。



在私有API与公共API之间有很多种的交互方式，例如，你可以购买一个商业软件比如内容管理系统(CMS)或是客户关系管理系统(CRM)安装在你自己的服务器上面，那这个软件就会提供许多的私有API，只不过不需要你自己搭建了。然后，你就可以随心所欲地使用这些API，去连接其他项目中的每一个组件。或是你把你的API提供给客户或是合作伙伴，这类共用API通常称作伙伴API。



无论是哪种场景，API基本上是将软件变成了可复用的组件，可以很容易地由自己或是他人组装，来创建可以做任何事情的模块化系统，这就是API为什么吸引人的原因。那么，API应该如何设计呢？